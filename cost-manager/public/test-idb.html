<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Test idb.js</title>
  </head>
  <body>
    <h1>Vanilla idb.js Test</h1>
    <button id="add">Add Sample Cost</button>
    <button id="report">Get This Month Report</button>
    <pre id="out"></pre>
    <script src="/idb.js"></script>
    <script>
      (function () {
        const out = document.getElementById('out');
        document.getElementById('add').onclick = function () {
          window.idb
            .addCost({ sum: 10, currency: 'USD', category: 'Other', description: 'Sample' })
            .then(function (res) {
              out.textContent = JSON.stringify(res, null, 2);
            })
            .catch(function (e) {
              out.textContent = 'Error: ' + e.message;
            });
        };
        document.getElementById('report').onclick = function () {
          const now = new Date();
          window.idb
            .getReport(now.getFullYear(), now.getMonth() + 1, 'USD')
            .then(function (rep) {
              out.textContent = JSON.stringify(rep, null, 2);
            })
            .catch(function (e) {
              out.textContent = 'Error: ' + e.message;
            });
        };
      })();
    </script>
  </body>
  </html>


